{% extends "base.html" %}

{% block head %}
    <style>
        #nav_right, #nav_username, #nav_account, #nav_button {
            line-height: normal;
        }

        #nav_right {
            display: grid;
            grid-template-rows: 50% 50%;
            grid-template-columns: auto 20px auto 20px;
            grid-template-areas: "nav_username . nav_button ." "nav_account . nav_button .";
            height: 100%;
        }

        #nav_username, #nav_account {
            font-size: large;
        }

        #nav_username {
            grid-area: nav_username;
            align-self: end;
            justify-self: center;
        }

        #nav_account {
            grid-area: nav_account;
            align-self: start;
            justify-self: right;
        }

        #nav_button {
            grid-area: nav_button;
            align-self: center;
            justify-self: center;
        }
    </style>
{% endblock %}

{% block body %}
    <nav>
        <div class="nav-wrapper">
            <ul id="nav-mobile" class="left hide-on-med-and-down">
                <li id="nav_news"><a href="/news">Новости</a></li>
                <li id="nav_index"><a href="/">Очередь печати</a></li>
                <li id="nav_pay"><a href="/pay">Пополнить счёт</a></li>
                <li id="nav_printers"><a href="/printers">Принтеры</a></li>
                <li id="nav_forum"><a href="/forum">Форум</a></li>
                <li id="nav_howto"><a href="/howto">Как печатать?</a></li>
            </ul>

            {% if g.user %}
                <div id="nav_right" class="right">
                    <span id="nav_username">{{ g.user.login }}, {{ g.user.first_name }} {{ g.user.last_name }}</span>
                    <span id="nav_account"><span id="nav_account_number">{{ g.user.account }}</span> руб.</span>
                    <span id="nav_button"><button id="button_logout" class="waves-effect waves-light btn">Выйти</button></span>
                </div>
            {% else %}
                <a href="/" class="brand-logo right">Физтех.Печать</a>
            {% endif %}
        </div>
    </nav>
{% endblock %}

{% block script %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.3/js.cookie.min.js"></script>
    <script>
        $(function () {
            let path = url(1) || 'index';
            $('#nav_' + path).addClass('active');

            $('#button_logout').click(function () {
                window.location.replace('/logout');
            });
        })
    </script>
{% endblock %}