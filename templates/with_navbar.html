{% extends "base.html" %}

{% block head %}
    <style>
        #right, #right_username, #right_account, #right_button {
            line-height: normal;
        }

        #right {
            display: grid;
            grid-template: 50% 50% / auto 20px auto 20px;
            height: 100%;
        }

        #right_username, #right_account {
            font-size: large;
        }

        #right_username {
            grid-row: 1;
            grid-column: 1;
            align-self: end;
            justify-self: center;
        }

        #right_account {
            grid-row: 2;
            grid-column: 1;
            align-self: start;
            justify-self: right;
        }

        #right_button {
            grid-row: 1 / 3;
            grid-column: 3;
            align-self: center;
            justify-self: center;
        }
    </style>
{% endblock %}

{% block body %}
    <nav>
        <div class="nav-wrapper">
            <ul id="nav-mobile" class="left hide-on-med-and-down">
                <li id="nav_news"><a href="/news">Новости</a></li>
                <li id="nav_index"><a href="/">Очередь печати</a></li>
                <li id="nav_pay"><a href="/pay">Пополнить счёт</a></li>
                <li id="nav_printers"><a href="/printers">Принтеры</a></li>
                <li id="nav_forum"><a href="/forum">Форум</a></li>
                <li id="nav_howto"><a href="/howto">Как печатать?</a></li>
            </ul>

            {% if user %}
                <div id="right" class="right">
                    <span id="right_username">{{ user.login }}, {{ user.first_name }} {{ user.last_name }}</span>
                    <span id="right_account">{{ user.account }} рублей</span>
                    <span id="right_button"><button id="button_logout" class="waves-effect waves-light btn">Выйти</button></span>
                </div>
            {% else %}
                <a href="/" class="brand-logo right">Физтех.Печать</a>
            {% endif %}
        </div>
    </nav>
{% endblock %}

{% block script %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.3/js.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-url/2.4.1/url.min.js"></script>
    <script>
        $(function () {
            let path = url(1) || 'index';
            console.log('#nav_' + path);
            $('#nav_' + path).addClass('active');

            $('#button_logout').click(function () {
                window.location.replace('/logout');
            });
        })
    </script>
{% endblock %}